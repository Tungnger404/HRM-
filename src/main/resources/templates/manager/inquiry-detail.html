<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <title>Inquiry Detail</title>
</head>

<body>
<div layout:fragment="content">

    <h2 class="mb-3">Inquiry Detail</h2>

    <div class="card mb-3">
        <div class="card-body">
            <p class="mb-1"><b>ID:</b> <span th:text="${inq.id}"></span></p>
            <p class="mb-1"><b>Payslip:</b> <span th:text="${inq.payslipId}"></span></p>
            <p class="mb-1"><b>Employee:</b> <span th:text="${inq.empId}"></span></p>
            <p class="mb-1"><b>Status:</b> <span th:text="${inq.status}"></span></p>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-header"><b>Question</b></div>
        <div class="card-body">
            <p th:text="${inq.question}"></p>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-header"><b>Answer</b></div>

        <div class="card-body" th:if="${inq.status == 'RESOLVED'}">
            <p th:text="${inq.answer}"></p>
        </div>

        <div class="card-body" th:if="${inq.status != 'RESOLVED'}">
            <form method="post" th:action="@{/manager/inquiries/{id}/resolve(id=${inq.id})}">
                <textarea class="form-control" name="answer" rows="4" placeholder="Enter answer..."></textarea>

                <div th:if="${_csrf != null}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                </div>

                <button class="btn btn-primary mt-2" type="submit">Resolve</button>
                <a class="btn btn-secondary mt-2" th:href="@{/manager/inquiries}">Back</a>
            </form>
        </div>
    </div>

</div>
</body>
</html>
