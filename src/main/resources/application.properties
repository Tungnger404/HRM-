# ===================================================================
# HRM SYSTEM - APPLICATION CONFIGURATION
# Module 5: Evaluation & Training
# ===================================================================

spring.application.name=hrm
# ===============================
# DATASOURCE
# ===============================
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=hrm_system_db;encrypt=true;trustServerCertificate=true
spring.datasource.username=sa
spring.datasource.password=123
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ===============================
# JPA
# ===============================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# ===============================
# JSP
# ===============================
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp

# ===================================================================
# DATABASE CONFIGURATION - SQL SERVER
# ===================================================================

# OPTION 1: SQL Authentication (username/password)
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=hrm_system_db;encrypt=false;trustServerCertificate=true
spring.datasource.username=sa
spring.datasource.password=123
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# OPTION 2: Windows Authentication (uncomment to use)
# spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=hrm_system_db;integratedSecurity=true;encrypt=false;trustServerCertificate=true
# spring.datasource.username=
# spring.datasource.password=
# spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ===================================================================
# JPA / HIBERNATE CONFIGURATION
# ===================================================================

# Hibernate DDL auto (none = không t? ??ng t?o/update schema)
spring.jpa.hibernate.ddl-auto=none

# Show SQL queries in console
spring.jpa.show-sql=true

# Hibernate properties
//spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Enable lazy loading outside transactions (only for development)
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# ===================================================================
# CONNECTION POOL (HikariCP - Default in Spring Boot)
# ===================================================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===================================================================
# JSP CONFIGURATION
# ===================================================================
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
server.port=8080
server.servlet.context-path=/hrm

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging.level.root=INFO
logging.level.com.example.hrm=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping=TRACE
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log to file (optional)
# logging.file.name=logs/hrm-application.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# ===================================================================
# ACTUATOR (Optional - for monitoring)
# ===================================================================
# management.endpoints.web.exposure.include=health,info
# management.endpoint.health.show-details=always

# ===================================================================
# MULTIPART FILE UPLOAD (for Evidence & Certificate uploads)
# ===================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# File storage location (customize as needed)
file.upload.dir=C:/hrm-uploads/
# Or use relative path:
# file.upload.dir=uploads/

# ===================================================================
# CORS CONFIGURATION (if needed for frontend)
# ===================================================================
# spring.web.cors.allowed-origins=http://localhost:3000
# spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# spring.web.cors.allowed-headers=*
# spring.web.cors.allow-credentials=true

# ===================================================================
# SPRING SECURITY (Temporarily disabled for development)
# Re-enable in production!
# ===================================================================
# spring.security.user.name=admin
# spring.security.user.password=admin123

# ===================================================================
# JACKSON JSON CONFIGURATION
# ===================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.default-property-inclusion=non_null

# ===================================================================
# TRANSACTION CONFIGURATION
# ===================================================================
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===================================================================
# NOTES & TROUBLESHOOTING
# ===================================================================

# If you get "TCP/IP connection error":
# 1. Check SQL Server is running
# 2. Enable TCP/IP in SQL Server Configuration Manager
# 3. Make sure port 1433 is open
# 4. Check Windows Firewall

# If you get "Login failed for user":
# 1. Verify SQL Server Authentication is enabled (Mixed Mode)
# 2. Check username/password are correct
# 3. Make sure user has access to hrm_system_db database

# If you want to use Windows Authentication:
# 1. Comment out SQL Authentication config above
# 2. Uncomment Windows Authentication config
# 3. Download mssql-jdbc_auth DLL
# 4. Place DLL in C:\Windows\System32\ or add to java.library.path

# If you get "Invalid column name" errors:
# 1. Check @Column(name="...") in Entity classes match database column names
# 2. SQL Server is case-insensitive but Java is case-sensitive
# 3. Run: SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='table_name'